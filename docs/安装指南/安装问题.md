# Linux 安装问题及解决方案

## 系统依赖安装

在运行 speaky 之前，需要安装以下系统依赖：

```bash
sudo apt-get install portaudio19-dev libxcb-cursor0
```

## 常见问题

### 1. pyaudio 编译失败：找不到 portaudio.h

**错误信息：**
```
src/pyaudio/device_api.c:9:10: fatal error: portaudio.h: No such file or directory
```

**解决方案：**
```bash
sudo apt-get install portaudio19-dev
```

### 2. GLIBCXX 版本不匹配

**错误信息：**
```
ImportError: /home/user/miniconda3/bin/../lib/libstdc++.so.6: version `GLIBCXX_3.4.32' not found
```

**原因：** miniconda/anaconda 自带的 libstdc++ 版本过旧，与系统库不兼容。

**解决方案：** start.sh 已自动处理，会设置 `LD_PRELOAD` 使用系统的 libstdc++。

如果手动运行，可以：
```bash
export LD_PRELOAD=/usr/lib/x86_64-linux-gnu/libstdc++.so.6
python -m speaky.main
```

### 3. Qt xcb 平台插件加载失败

**错误信息：**
```
qt.qpa.plugin: From 6.5.0, xcb-cursor0 or libxcb-cursor0 is needed to load the Qt xcb platform plugin.
qt.qpa.plugin: Could not load the Qt platform plugin "xcb"
```

**解决方案：**
```bash
sudo apt-get install libxcb-cursor0
```

## 一键安装所有依赖

```bash
sudo apt-get install portaudio19-dev libxcb-cursor0 xdotool xclip
```
