# Playwright MCP Bridge 浏览器扩展安装指南

## 概述

Playwright MCP Bridge 扩展允许 Speaky 语音助手连接到你正在使用的 Chrome 浏览器，从而保留你的登录状态和浏览器设置。

## 为什么需要这个扩展？

- **保留登录状态**：使用你已登录的账号（GitHub、Google、百度等）
- **无需重复登录**：在你当前的浏览器中操作，而不是打开新的浏览器实例
- **统一体验**：新标签页会在你正在使用的浏览器窗口中打开

## 安装步骤

### 1. 下载扩展

扩展已自动下载到：
```
~/.speaky/mcp/extension/
```

如果需要手动下载：
```bash
mkdir -p ~/.speaky/mcp/extension
cd ~/.speaky/mcp/extension
curl -sL "https://github.com/microsoft/playwright-mcp/releases/latest/download/playwright-mcp-extension-0.0.53.zip" -o extension.zip
unzip -o extension.zip
rm extension.zip
```

### 2. 安装到 Chrome

1. 打开 Chrome 浏览器
2. 在地址栏输入：`chrome://extensions/`
3. 开启右上角的 **"开发者模式"** 开关
4. 点击左上角的 **"加载已解压的扩展程序"** 按钮
5. 在文件选择器中，选择目录：
   ```
   /home/<你的用户名>/.speaky/mcp/extension
   ```
6. 点击 **"选择"** 确认

### 3. 验证安装

安装成功后，你会在 Chrome 扩展列表中看到：
- **Playwright MCP Bridge**
- 扩展图标会出现在浏览器工具栏

### 4. 配置 Speaky

确保 Speaky 配置中启用了 `--extension` 模式：

```yaml
mcp:
  servers:
    playwright:
      args:
      - ~/.speaky/mcp/node_modules/@playwright/mcp/cli.js
      - --extension
      command: node
      enabled: true
      env:
        DISPLAY: ':0'
```

## 使用方法

1. 确保 Chrome 浏览器正在运行
2. 启动 Speaky 应用
3. 按住快捷键说出指令，例如：
   - "帮我打开百度"
   - "打开 GitHub"
   - "搜索 Python 教程"

指令会在你当前的 Chrome 浏览器中执行，保留所有登录状态。

## 常见问题

### Q: 扩展安装后不工作？
A: 确保：
1. Chrome 浏览器正在运行
2. 扩展已启用（不是灰色状态）
3. Speaky 配置使用了 `--extension` 参数

### Q: 如何更新扩展？
A: 重新下载最新版本并覆盖安装：
```bash
cd ~/.speaky/mcp/extension
curl -sL "https://github.com/microsoft/playwright-mcp/releases/latest/download/playwright-mcp-extension-0.0.53.zip" -o extension.zip
unzip -o extension.zip
rm extension.zip
```
然后在 `chrome://extensions/` 页面点击扩展的刷新按钮。

### Q: 可以用 Edge 浏览器吗？
A: 可以！Edge 也支持 Chrome 扩展。安装步骤类似，访问 `edge://extensions/` 即可。

## 参考链接

- [Playwright MCP GitHub](https://github.com/microsoft/playwright-mcp)
- [扩展安装文档](https://github.com/microsoft/playwright-mcp/tree/main/extension)
