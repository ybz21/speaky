# LLM å¯¹è¯æ‚¬æµ®çª—è®¾è®¡æ–‡æ¡£

> æ ¸å¿ƒç†å¿µï¼š**åªæ˜¾ç¤ºå½“å‰æœ€æ–°çŠ¶æ€**ï¼Œç”¨é¢œè‰²åŒºåˆ†å†…å®¹ç±»å‹

---

## ä¸€ã€è®¾è®¡åŸåˆ™

### 1.1 æç®€çŠ¶æ€æ˜¾ç¤º

ä¸åŒäºä¼ ç»ŸèŠå¤©ç•Œé¢çš„æ¶ˆæ¯å †å ï¼ŒLLM æ‚¬æµ®çª—**åªæ˜¾ç¤ºå½“å‰æœ€é‡è¦çš„ä¸€æ¡ä¿¡æ¯**ï¼š

| ä¼˜å…ˆçº§ | å†…å®¹ç±»å‹ | è¯´æ˜ |
|--------|----------|------|
| 1 | é”™è¯¯ä¿¡æ¯ | æœ€é«˜ä¼˜å…ˆçº§ï¼Œå¿…é¡»ç«‹å³å±•ç¤º |
| 2 | æœ€ç»ˆç»“æœ | Agent å®Œæˆåçš„è¾“å‡º |
| 3 | æ‰§è¡ŒçŠ¶æ€ | å½“å‰æ­£åœ¨æ‰§è¡Œçš„å·¥å…· |
| 4 | æ€è€ƒçŠ¶æ€ | LLM æ­£åœ¨æ€è€ƒ/ç”Ÿæˆ |
| 5 | ç”¨æˆ·è¾“å…¥ | ç”¨æˆ·çš„è¯­éŸ³è¾“å…¥æ–‡æœ¬ |

### 1.2 é¢œè‰²å³è¯­ä¹‰

é€šè¿‡é¢œè‰²è®©ç”¨æˆ·**ä¸€çœ¼è¯†åˆ«**å½“å‰çŠ¶æ€ç±»å‹ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·è¾“å…¥      â†’  ç™½è‰²/æµ…ç°    "æ‰“å¼€ GitHub æœç´¢ langchain"      â”‚
â”‚  æ€è€ƒä¸­        â†’  ç´«è‰²         "æ­£åœ¨åˆ†ææ‚¨çš„è¯·æ±‚..."             â”‚
â”‚  æ‰§è¡Œä¸­        â†’  æ©™è‰²         "ğŸ”§ browser.navigate â†’ github.com"â”‚
â”‚  å®Œæˆ          â†’  ç»¿è‰²         "âœ“ å·²å®Œæˆæœç´¢æ“ä½œ"                â”‚
â”‚  é”™è¯¯          â†’  çº¢è‰²         "âœ— æ— æ³•è¿æ¥åˆ°æµè§ˆå™¨æœåŠ¡"          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## äºŒã€çŠ¶æ€ä¸é¢œè‰²å®šä¹‰

### 2.1 å®Œæ•´è‰²æ¿

| çŠ¶æ€ | çŠ¶æ€æ ‡ç­¾è‰² | å†…å®¹æ–‡æœ¬è‰² | èƒŒæ™¯æ¸å˜ | å›¾æ ‡é¢œè‰² |
|------|------------|------------|----------|----------|
| **è†å¬ä¸­** | `#00D9FF` | `rgba(255,255,255,0.6)` | é’è“å¾®å…‰ | é’è“ |
| **è¯†åˆ«ä¸­** | `#00D9FF` | `#FFE066` | é’è“å¾®å…‰ | é’è“ |
| **ç”¨æˆ·è¾“å…¥** | `#888888` | `rgba(255,255,255,0.9)` | ç°è‰²å¾®å…‰ | ç°è‰² |
| **æ€è€ƒä¸­** | `#BB86FC` | `#E1BEE7` | ç´«è‰²å¾®å…‰ | ç´«è‰² |
| **æ‰§è¡Œä¸­** | `#FF9800` | `#FFE0B2` | æ©™è‰²å¾®å…‰ | æ©™è‰² |
| **å®Œæˆ** | `#00E676` | `rgba(255,255,255,0.95)` | ç»¿è‰²å¾®å…‰ | ç»¿è‰² |
| **é”™è¯¯** | `#FF5252` | `#FFCDD2` | çº¢è‰²å¾®å…‰ | çº¢è‰² |

### 2.2 é¢œè‰²ä»£ç 

```python
# speaky/ui/floating_window.py

LLM_STATE_COLORS = {
    # è†å¬ä¸­ - é’è“è‰²
    "listening": {
        "label": "#00D9FF",
        "text": "rgba(255,255,255,0.6)",
        "gradient_start": "rgba(0, 180, 220, 0.10)",
        "gradient_end": "rgba(15, 25, 35, 0.95)",
        "icon": "#00D9FF",
    },

    # è¯†åˆ«ä¸­ - é’è“ + é»„è‰²æ–‡æœ¬
    "recognizing": {
        "label": "#00D9FF",
        "text": "#FFE066",
        "gradient_start": "rgba(0, 180, 220, 0.10)",
        "gradient_end": "rgba(15, 25, 35, 0.95)",
        "icon": "#00D9FF",
    },

    # ç”¨æˆ·è¾“å…¥å›æ˜¾ - ä¸­æ€§ç°
    "user_input": {
        "label": "#888888",
        "text": "rgba(255,255,255,0.9)",
        "gradient_start": "rgba(100, 100, 100, 0.08)",
        "gradient_end": "rgba(25, 25, 30, 0.95)",
        "icon": "#888888",
    },

    # æ€è€ƒä¸­ - Material Purple
    "thinking": {
        "label": "#BB86FC",
        "text": "#E1BEE7",
        "gradient_start": "rgba(150, 100, 220, 0.10)",
        "gradient_end": "rgba(25, 15, 35, 0.95)",
        "icon": "#BB86FC",
    },

    # æ‰§è¡Œä¸­ - Material Orange
    "executing": {
        "label": "#FF9800",
        "text": "#FFE0B2",
        "gradient_start": "rgba(255, 150, 0, 0.10)",
        "gradient_end": "rgba(35, 25, 15, 0.95)",
        "icon": "#FF9800",
    },

    # å®Œæˆ - Material Green
    "done": {
        "label": "#00E676",
        "text": "rgba(255,255,255,0.95)",
        "gradient_start": "rgba(0, 200, 100, 0.10)",
        "gradient_end": "rgba(15, 30, 20, 0.95)",
        "icon": "#00E676",
    },

    # é”™è¯¯ - Material Red
    "error": {
        "label": "#FF5252",
        "text": "#FFCDD2",
        "gradient_start": "rgba(255, 80, 80, 0.10)",
        "gradient_end": "rgba(35, 15, 15, 0.95)",
        "icon": "#FF5252",
    },
}
```

---

## ä¸‰ã€ç•Œé¢å¸ƒå±€

### 3.1 å•è¡ŒçŠ¶æ€æ˜¾ç¤º

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    æ€è€ƒä¸­                                            â”‚
â”‚  â”‚  App   â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚  â”‚  Icon  â”‚                                                      â”‚
â”‚  â”‚   ğŸŸ£   â”‚    æ­£åœ¨åˆ†ææ‚¨çš„è¯·æ±‚...                               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                      â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     80px                          420px
                     500 x 88 px
```

### 3.2 å¸ƒå±€ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  padding: 12px                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”‚          â”‚  status_label     (çŠ¶æ€æ ‡ç­¾: 11pt, ç²—ä½“)      â”‚
â”‚  â”‚  å·¦ä¾§    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  â”‚  å›¾æ ‡åŒº  â”‚                                               â”‚
â”‚  â”‚  80px    â”‚  content_label    (å†…å®¹æ–‡æœ¬: 13pt)           â”‚
â”‚  â”‚          â”‚                                               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 å­—ä½“è§„æ ¼

| å…ƒç´  | å­—å· | å­—é‡ | é¢œè‰² |
|------|------|------|------|
| **çŠ¶æ€æ ‡ç­¾** | 11pt | Medium (500) | çŠ¶æ€å¯¹åº”çš„ `label` é¢œè‰² |
| **å†…å®¹æ–‡æœ¬** | 13pt | Regular (400) | çŠ¶æ€å¯¹åº”çš„ `text` é¢œè‰² |
| **åº”ç”¨åç§°** | 9pt | Regular (400) | `rgba(255,255,255,0.5)` |

---

## å››ã€çŠ¶æ€å†…å®¹å±•ç¤º

### 4.1 å„çŠ¶æ€æ˜¾ç¤ºå†…å®¹

#### è†å¬ä¸­ (LISTENING)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    æ­£åœ¨è†å¬...                      [#00D9FF]    â”‚
â”‚  â”‚ Chrome â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚  â”‚   ğŸ”µ   â”‚                                                  â”‚
â”‚  â”‚ (è„‰åŠ¨) â”‚    è¯·è¯´å‡ºæ‚¨çš„æŒ‡ä»¤                   [æµ…ç°å ä½]   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### è¯†åˆ«ä¸­ (RECOGNIZING)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    è¯†åˆ«ä¸­...                        [#00D9FF]    â”‚
â”‚  â”‚ Chrome â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚  â”‚   ğŸ”µ   â”‚                                                  â”‚
â”‚  â”‚ (å¿«é€Ÿ) â”‚    æ‰“å¼€GitHubæœç´¢langchain          [#FFE066]    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ç”¨æˆ·è¾“å…¥ç¡®è®¤ (USER_INPUT)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    æ‚¨è¯´                             [#888888]    â”‚
â”‚  â”‚ Chrome â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚  â”‚   âš«   â”‚                                                  â”‚
â”‚  â”‚ (é™æ­¢) â”‚    æ‰“å¼€GitHubæœç´¢langchain          [ç™½è‰²]       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ€è€ƒä¸­ (THINKING)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    æ€è€ƒä¸­...                        [#BB86FC]    â”‚
â”‚  â”‚ Chrome â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚  â”‚   ğŸŸ£   â”‚                                                  â”‚
â”‚  â”‚ (è„‰åŠ¨) â”‚    æ­£åœ¨ç†è§£æ‚¨çš„æ„å›¾...              [#E1BEE7]    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

# æˆ–æ˜¾ç¤º LLM æµå¼è¾“å‡ºï¼ˆå¦‚æœæœ‰ï¼‰
â”‚  â”‚   ğŸŸ£   â”‚    æˆ‘éœ€è¦æ‰“å¼€æµè§ˆå™¨å¹¶...            [#E1BEE7]    â”‚
```

#### æ‰§è¡Œä¸­ (EXECUTING)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    æ‰§è¡Œä¸­...                        [#FF9800]    â”‚
â”‚  â”‚ Chrome â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚  â”‚   ğŸŸ    â”‚                                                  â”‚
â”‚  â”‚ (æ—‹è½¬) â”‚    ğŸ”§ browser.open â†’ github.com     [#FFE0B2]    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å®Œæˆ (DONE)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    å®Œæˆ                             [#00E676]    â”‚
â”‚  â”‚ Chrome â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚  â”‚   ğŸŸ¢   â”‚                                                  â”‚
â”‚  â”‚ (é™æ­¢) â”‚    âœ“ å·²æ‰“å¼€ GitHub å¹¶æœç´¢ langchain  [ç™½è‰²]      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### é”™è¯¯ (ERROR)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    é”™è¯¯                             [#FF5252]    â”‚
â”‚  â”‚ Chrome â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚  â”‚   ğŸ”´   â”‚                                                  â”‚
â”‚  â”‚ (é™æ­¢) â”‚    âœ— æ— æ³•å¯åŠ¨æµè§ˆå™¨æœåŠ¡              [#FFCDD2]   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## äº”ã€çŠ¶æ€æµè½¬ä¸æ˜¾ç¤ºè§„åˆ™

### 5.1 çŠ¶æ€æœº

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   IDLE      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ æŒ‰ä¸‹å¿«æ·é”®
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  LISTENING  â”‚ â† "æ­£åœ¨è†å¬..."
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ é‡Šæ”¾å¿«æ·é”®
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ RECOGNIZING â”‚ â† "è¯†åˆ«ä¸­..." + éƒ¨åˆ†è¯†åˆ«ç»“æœ
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ è¯†åˆ«å®Œæˆ
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ USER_INPUT  â”‚ â† "æ‚¨è¯´" + å®Œæ•´è¯†åˆ«æ–‡æœ¬ (å¯é€‰ï¼Œ0.3ç§’)
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ å‘é€ç»™ LLM
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  THINKING   â”‚ â† "æ€è€ƒä¸­..." + LLM æµå¼è¾“å‡º
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ LLM å†³å®šè°ƒç”¨å·¥å…·
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”Œâ”€â”€â”€â”€â–¶â”‚  EXECUTING  â”‚ â† "æ‰§è¡Œä¸­..." + å½“å‰å·¥å…·å
              â”‚     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
              â”‚            â”‚ å·¥å…·å®Œæˆï¼Œç»§ç»­æ€è€ƒ
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ æ‰€æœ‰å®Œæˆ
                           â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   DONE  æˆ–  ERROR       â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ 2ç§’åè‡ªåŠ¨éšè—
                      â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚    IDLE     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 å†…å®¹æ›´æ–°è§„åˆ™

| çŠ¶æ€ | æ˜¾ç¤ºçš„æ–‡æœ¬å†…å®¹ | æ›´æ–°é¢‘ç‡ |
|------|----------------|----------|
| LISTENING | "è¯·è¯´å‡ºæ‚¨çš„æŒ‡ä»¤" (å ä½ç¬¦) | é™æ€ |
| RECOGNIZING | éƒ¨åˆ†è¯†åˆ«ç»“æœï¼ˆæµå¼ï¼‰ | å®æ—¶ |
| USER_INPUT | å®Œæ•´è¯†åˆ«æ–‡æœ¬ | ä¸€æ¬¡ |
| THINKING | LLM æµå¼è¾“å‡º / "æ­£åœ¨åˆ†æ..." | å®æ—¶ |
| EXECUTING | "ğŸ”§ {tool_name} â†’ {summary}" | æ¯ä¸ªå·¥å…·æ›´æ–° |
| DONE | æœ€ç»ˆç»“æœæ–‡æœ¬ | ä¸€æ¬¡ |
| ERROR | é”™è¯¯ä¿¡æ¯ | ä¸€æ¬¡ |

### 5.3 çŠ¶æ€åœç•™æ—¶é—´

| çŠ¶æ€ | æœ€çŸ­åœç•™ | è‡ªåŠ¨åˆ‡æ¢ |
|------|----------|----------|
| LISTENING | æ— é™åˆ¶ | ç”¨æˆ·é‡Šæ”¾å¿«æ·é”® |
| RECOGNIZING | 0.3s | è¯†åˆ«å®Œæˆå |
| USER_INPUT | 0.3s | å¯é€‰è·³è¿‡ |
| THINKING | æ— é™åˆ¶ | LLM å†³å®šå·¥å…·è°ƒç”¨ |
| EXECUTING | 0.5s | å·¥å…·å®Œæˆå |
| DONE | 2s | è‡ªåŠ¨éšè— |
| ERROR | 3s | è‡ªåŠ¨éšè— |

---

## å…­ã€ç‰¹æ®Šæ˜¾ç¤ºè§„åˆ™

### 6.1 å¤šè¡Œæ–‡æœ¬å¤„ç†ï¼ˆåŒå±‚æ˜¾ç¤ºæ–¹æ¡ˆï¼‰

å½“ LLM è¿”å›å¤šè¡Œæˆ–é•¿æ–‡æœ¬æ—¶ï¼Œé‡‡ç”¨**åŒå±‚æ˜¾ç¤º**ç­–ç•¥ï¼Œå°†å†…å®¹åˆ†ä¸ºä¸»ä¿¡æ¯å’Œæ¬¡è¦ä¿¡æ¯ï¼š

#### è®¾è®¡ç†å¿µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ğŸŸ¢]  å®Œæˆ                                                  â”‚
â”‚        âœ“ å·²å®Œæˆæœç´¢æ“ä½œ                    â† ä¸»ä¿¡æ¯ (13pt)   â”‚
â”‚        æ‰“å¼€GitHubå¹¶æœç´¢äº†langchain          â† æ¬¡è¦ä¿¡æ¯ (11pt)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ˜¾ç¤ºè§„åˆ™

| å›ç­”é•¿åº¦ | ä¸»ä¿¡æ¯ | æ¬¡è¦ä¿¡æ¯ |
|----------|--------|----------|
| â‰¤ 30 å­—ç¬¦ | å®Œæ•´æ˜¾ç¤º | æ—  |
| 31-80 å­—ç¬¦ | ç¬¬ä¸€å¥/é¦–è¡Œ | å‰©ä½™å†…å®¹ï¼ˆæˆªæ–­è‡³40å­—ç¬¦ï¼‰|
| > 80 å­—ç¬¦ | ç¬¬ä¸€å¥/é¦–è¡Œ | "å…± N é¡¹å†…å®¹" æˆ–æ‘˜è¦ |

#### è§†è§‰æ•ˆæœ

**çŸ­å›ç­”ï¼ˆå•è¡Œï¼‰ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ğŸŸ¢]  å®Œæˆ                                         â”‚
â”‚        âœ“ å·²æ‰“å¼€ GitHub                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¸­ç­‰å›ç­”ï¼ˆåŒè¡Œï¼‰ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ğŸŸ¢]  å®Œæˆ                                         â”‚
â”‚        âœ“ å·²å®Œæˆæœç´¢æ“ä½œ                             â”‚  â† 13pt ç™½è‰²
â”‚        æ‰“å¼€GitHubå¹¶æœç´¢äº†langchain                  â”‚  â† 11pt ç°è‰²
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é•¿å›ç­”ï¼ˆæ‘˜è¦ï¼‰ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ğŸŸ¢]  å®Œæˆ                                         â”‚
â”‚        âœ“ æˆ‘å·²ç»å®Œæˆäº†ä»¥ä¸‹æ“ä½œ                       â”‚  â† 13pt ç™½è‰²
â”‚        å…± 3 é¡¹æ“ä½œ                                  â”‚  â† 11pt ç°è‰²
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å­—ä½“è§„æ ¼

| å…ƒç´  | å­—å· | é¢œè‰² |
|------|------|------|
| **ä¸»ä¿¡æ¯** | 13pt | çŠ¶æ€å¯¹åº”çš„ `text` é¢œè‰² |
| **æ¬¡è¦ä¿¡æ¯** | 11pt | `rgba(255,255,255,0.5)` ç°è‰² |

#### å®ç°ä»£ç 

```python
def format_result_text(text: str) -> tuple[str, str]:
    """å°†ç»“æœæ–‡æœ¬åˆ†å‰²ä¸ºä¸»ä¿¡æ¯å’Œæ¬¡è¦ä¿¡æ¯

    Returns:
        (primary, secondary): ä¸»ä¿¡æ¯å’Œæ¬¡è¦ä¿¡æ¯
    """
    if not text:
        return "", ""

    # æ¸…ç†æ–‡æœ¬
    text = text.strip()

    # çŸ­æ–‡æœ¬ï¼šç›´æ¥æ˜¾ç¤º
    if len(text) <= 30:
        return text, ""

    # åˆ†å‰²ä¸ºå¤šè¡Œæˆ–å¤šå¥
    lines = [l.strip() for l in text.split('\n') if l.strip()]

    if len(lines) == 1:
        # å•è¡Œé•¿æ–‡æœ¬ï¼šæŒ‰å¥å·åˆ†å‰²
        sentences = text.split('ã€‚')
        if len(sentences) > 1:
            primary = sentences[0] + "ã€‚"
            secondary = "ã€‚".join(sentences[1:])[:40]
            if len("ã€‚".join(sentences[1:])) > 40:
                secondary += "..."
            return primary, secondary
        else:
            # æ— å¥å·ï¼šæˆªæ–­
            return text[:30] + "...", ""

    # å¤šè¡Œæ–‡æœ¬
    primary = lines[0]
    if len(primary) > 40:
        primary = primary[:37] + "..."

    if len(lines) == 2:
        secondary = lines[1][:40]
        if len(lines[1]) > 40:
            secondary += "..."
    else:
        # 3è¡Œä»¥ä¸Šï¼šæ˜¾ç¤ºæ•°é‡
        secondary = f"å…± {len(lines)} é¡¹å†…å®¹"

    return primary, secondary
```

### 6.2 å·¥å…·è°ƒç”¨æ˜¾ç¤ºæ ¼å¼

```python
def format_tool_display(tool_name: str, args: dict) -> str:
    """æ ¼å¼åŒ–å·¥å…·è°ƒç”¨æ˜¾ç¤º"""
    # æå–å…³é”®å‚æ•°
    if "url" in args:
        summary = args["url"][:30]
    elif "path" in args:
        summary = args["path"][:30]
    elif "query" in args:
        summary = args["query"][:20]
    else:
        summary = str(args)[:25]

    return f"ğŸ”§ {tool_name} â†’ {summary}"

# ç¤ºä¾‹è¾“å‡º:
# ğŸ”§ browser.navigate â†’ github.com
# ğŸ”§ browser.type â†’ langchain
# ğŸ”§ file.read â†’ /home/user/notes.txt
```

### 6.3 å¤šå·¥å…·ä¾æ¬¡æ‰§è¡Œ

å½“ Agent è°ƒç”¨å¤šä¸ªå·¥å…·æ—¶ï¼Œ**åªæ˜¾ç¤ºå½“å‰æ­£åœ¨æ‰§è¡Œçš„å·¥å…·**ï¼š

```
ç¬¬1ä¸ªå·¥å…·æ‰§è¡Œä¸­:
    æ‰§è¡Œä¸­...
    ğŸ”§ browser.open â†’ github.com

ç¬¬2ä¸ªå·¥å…·æ‰§è¡Œä¸­:
    æ‰§è¡Œä¸­...
    ğŸ”§ browser.type â†’ langchain    â† æ›¿æ¢ä¸Šä¸€æ¡

å®Œæˆå:
    å®Œæˆ
    âœ“ å·²æ‰“å¼€ GitHub å¹¶æœç´¢ langchain
```

---

## ä¸ƒã€åŠ¨ç”»æ•ˆæœ

### 7.1 çŠ¶æ€åˆ‡æ¢åŠ¨ç”»

```python
# èƒŒæ™¯æ¸å˜è¿‡æ¸¡
TRANSITION_DURATION = 300  # ms

# æ–‡æœ¬é¢œè‰²è¿‡æ¸¡
TEXT_COLOR_TRANSITION = 200  # ms

# åŠ¨ç”»çƒé¢œè‰²è¿‡æ¸¡
ORB_COLOR_LERP = 0.15  # æ¯å¸§æ’å€¼æ¯”ä¾‹
```

### 7.2 å›¾æ ‡åŠ¨ç”»

| çŠ¶æ€ | åŠ¨ç”»æ•ˆæœ |
|------|----------|
| LISTENING | å¹³ç¼“è„‰åŠ¨ (0.8s å‘¨æœŸ) |
| RECOGNIZING | å¿«é€Ÿè„‰åŠ¨ (0.4s å‘¨æœŸ) |
| THINKING | å‘¼å¸æ•ˆæœ (1.2s å‘¨æœŸ) |
| EXECUTING | æ—‹è½¬åŠ¨ç”» (1s å‘¨æœŸ) æˆ–å¿«é€Ÿè„‰åŠ¨ |
| DONE | æ”¾å¤§å¼¹å› (0.3s) åé™æ­¢ |
| ERROR | æŠ–åŠ¨ (0.2s) åé™æ­¢ |

### 7.3 æ–‡æœ¬æ›´æ–°åŠ¨ç”»

```python
# æµå¼æ–‡æœ¬æ›´æ–° - æ— åŠ¨ç”»ï¼Œç›´æ¥æ›¿æ¢
# é¿å…é—ªçƒå’ŒæŠ–åŠ¨

# çŠ¶æ€åˆ‡æ¢æ—¶çš„æ–‡æœ¬ - æ·¡å…¥æ·¡å‡º
FADE_DURATION = 150  # ms
```

---

## å…«ã€å®ç°ä»£ç 

### 8.1 çŠ¶æ€æ˜¾ç¤ºæ–¹æ³•

```python
class FloatingWindow(QWidget):
    """LLM æ‚¬æµ®çª— - å•çŠ¶æ€æ˜¾ç¤ºæ¨¡å¼"""

    def set_llm_state(
        self,
        state: str,           # listening/recognizing/thinking/executing/done/error
        content: str = "",    # æ˜¾ç¤ºçš„æ–‡æœ¬å†…å®¹
        tool_name: str = "",  # æ‰§è¡Œä¸­æ—¶çš„å·¥å…·å
    ):
        """è®¾ç½® LLM çŠ¶æ€å’Œæ˜¾ç¤ºå†…å®¹"""
        colors = LLM_STATE_COLORS.get(state, LLM_STATE_COLORS["listening"])

        # 1. æ›´æ–°çŠ¶æ€æ ‡ç­¾
        status_texts = {
            "listening": "æ­£åœ¨è†å¬...",
            "recognizing": "è¯†åˆ«ä¸­...",
            "user_input": "æ‚¨è¯´",
            "thinking": "æ€è€ƒä¸­...",
            "executing": "æ‰§è¡Œä¸­...",
            "done": "å®Œæˆ",
            "error": "é”™è¯¯",
        }
        self._status_label.setText(
            f'<span style="color: {colors["label"]}">{status_texts[state]}</span>'
        )

        # 2. æ›´æ–°å†…å®¹æ–‡æœ¬
        display_text = content
        if state == "executing" and tool_name:
            display_text = f"ğŸ”§ {tool_name}"
            if content:
                display_text += f" â†’ {content}"

        self._content_label.setText(display_text)
        self._content_label.setStyleSheet(f"color: {colors['text']}; background: transparent;")

        # 3. æ›´æ–°èƒŒæ™¯
        self._update_background(state)

        # 4. æ›´æ–°å›¾æ ‡åŠ¨ç”»
        self._update_icon_animation(state)

    def _update_background(self, state: str):
        colors = LLM_STATE_COLORS[state]
        self._container.setStyleSheet(f"""
            QWidget#container {{
                background: qlineargradient(
                    x1:0, y1:0, x2:1, y2:1,
                    stop:0 {colors["gradient_start"]},
                    stop:1 {colors["gradient_end"]}
                );
                border-radius: 12px;
                border: 1px solid rgba(255, 255, 255, 0.12);
            }}
        """)

    def _update_icon_animation(self, state: str):
        colors = LLM_STATE_COLORS[state]
        self._icon_orb.set_color(QColor(colors["icon"]))

        if state in ["listening", "recognizing", "thinking", "executing"]:
            self._icon_orb.start_animation()
        else:
            self._icon_orb.stop_animation()
```

### 8.2 Agent å†…å®¹é€‚é…

```python
# ç®€åŒ–åçš„ AgentContent é€‚é…
def set_agent_content(self, content: AgentContent):
    """æ ¹æ® AgentContent æ›´æ–°æ˜¾ç¤º - åªæ˜¾ç¤ºæœ€æ–°çŠ¶æ€"""

    # ä¼˜å…ˆçº§åˆ¤æ–­ï¼šé”™è¯¯ > ç»“æœ > æ‰§è¡Œä¸­ > æ€è€ƒä¸­ > ç”¨æˆ·è¾“å…¥
    if content.error:
        self.set_llm_state("error", content.error)

    elif content.result:
        self.set_llm_state("done", f"âœ“ {content.result}")

    elif content.status == AgentStatus.EXECUTING and content.tool_calls:
        # æ˜¾ç¤ºæœ€åä¸€ä¸ªæ‰§è¡Œä¸­çš„å·¥å…·
        current_tool = next(
            (t for t in reversed(content.tool_calls) if t.status == "running"),
            content.tool_calls[-1] if content.tool_calls else None
        )
        if current_tool:
            self.set_llm_state("executing", current_tool.summary, current_tool.name)

    elif content.status == AgentStatus.THINKING:
        # æ˜¾ç¤ºæ€è€ƒçŠ¶æ€æˆ–æµå¼è¾“å‡º
        text = content.thinking if content.thinking else "æ­£åœ¨åˆ†ææ‚¨çš„è¯·æ±‚..."
        self.set_llm_state("thinking", text)

    elif content.user_input:
        self.set_llm_state("user_input", content.user_input)

    else:
        self.set_llm_state("listening", "è¯·è¯´å‡ºæ‚¨çš„æŒ‡ä»¤")
```

---

## ä¹ã€è§†è§‰æ•ˆæœé¢„è§ˆ

### 9.1 é¢œè‰²å¯¹æ¯”

```
çŠ¶æ€          â”‚ æ ‡ç­¾é¢œè‰²   â”‚ æ–‡æœ¬é¢œè‰²   â”‚ èƒŒæ™¯ä¸»è‰²
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
è†å¬ä¸­        â”‚ ğŸ”µ é’è“    â”‚ âšª æµ…ç°    â”‚ é’è“å¾®å…‰
è¯†åˆ«ä¸­        â”‚ ğŸ”µ é’è“    â”‚ ğŸŸ¡ é»„è‰²    â”‚ é’è“å¾®å…‰
ç”¨æˆ·è¾“å…¥      â”‚ âš« ç°è‰²    â”‚ âšª ç™½è‰²    â”‚ ç°è‰²å¾®å…‰
æ€è€ƒä¸­        â”‚ ğŸŸ£ ç´«è‰²    â”‚ ğŸŸ£ æ·¡ç´«    â”‚ ç´«è‰²å¾®å…‰
æ‰§è¡Œä¸­        â”‚ ğŸŸ  æ©™è‰²    â”‚ ğŸŸ  æ·¡æ©™    â”‚ æ©™è‰²å¾®å…‰
å®Œæˆ          â”‚ ğŸŸ¢ ç»¿è‰²    â”‚ âšª ç™½è‰²    â”‚ ç»¿è‰²å¾®å…‰
é”™è¯¯          â”‚ ğŸ”´ çº¢è‰²    â”‚ ğŸ”´ æ·¡çº¢    â”‚ çº¢è‰²å¾®å…‰
```

### 9.2 é¢œè‰²è¯­ä¹‰

```
ğŸ”µ é’è“ = ç­‰å¾…è¾“å…¥ (è¢«åŠ¨çŠ¶æ€)
ğŸŸ£ ç´«è‰² = AI æ€è€ƒ (æ™ºèƒ½æ´»åŠ¨)
ğŸŸ  æ©™è‰² = æ­£åœ¨æ‰§è¡Œ (ç§¯æè¡ŒåŠ¨)
ğŸŸ¢ ç»¿è‰² = æˆåŠŸå®Œæˆ
ğŸ”´ çº¢è‰² = å‡ºç°é”™è¯¯
âš« ç°è‰² = ç”¨æˆ·å†…å®¹ (é AI)
```

---

## åã€ä¸ç°æœ‰ç³»ç»Ÿå¯¹æ¥

### 10.1 å¤ç”¨ç°æœ‰ç»„ä»¶

| ç»„ä»¶ | å¤ç”¨æ–¹å¼ |
|------|----------|
| `FloatingWindow` | æ‰©å±•ï¼Œæ·»åŠ  `set_llm_state()` æ–¹æ³• |
| `AppIconOrbWidget` | å¤ç”¨ï¼Œè°ƒæ•´é¢œè‰²æ˜ å°„ |
| `AgentContent` | ä¿æŒä¸å˜ï¼Œç®€åŒ–æ˜¾ç¤ºé€»è¾‘ |
| `LLM_STATE_COLORS` | æ–°å¢é¢œè‰²é…ç½® |

### 10.2 ä¿¡å·æµ

```
LLMAgentHandler
    â”‚
    â”œâ”€ on_listening() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ set_llm_state("listening")
    â”‚
    â”œâ”€ on_recognizing(text) â”€â”€â”€â”€â–¶ set_llm_state("recognizing", text)
    â”‚
    â”œâ”€ on_user_input(text) â”€â”€â”€â”€â”€â–¶ set_llm_state("user_input", text)
    â”‚
    â”œâ”€ on_thinking(stream) â”€â”€â”€â”€â”€â–¶ set_llm_state("thinking", stream)
    â”‚
    â”œâ”€ on_executing(tool) â”€â”€â”€â”€â”€â”€â–¶ set_llm_state("executing", summary, tool_name)
    â”‚
    â”œâ”€ on_done(result) â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ set_llm_state("done", result)
    â”‚
    â””â”€ on_error(error) â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ set_llm_state("error", error)
```

---

## åä¸€ã€å®ç°ä¼˜å…ˆçº§

### P0 - å¿…é¡»å®ç°

1. âœ… çŠ¶æ€é¢œè‰²å®šä¹‰ (`LLM_STATE_COLORS`)
2. âœ… `set_llm_state()` æ–¹æ³•
3. âœ… çŠ¶æ€æ ‡ç­¾é¢œè‰²
4. âœ… å†…å®¹æ–‡æœ¬é¢œè‰²
5. âœ… èƒŒæ™¯æ¸å˜åˆ‡æ¢

### P1 - æ¨èå®ç°

1. çŠ¶æ€åˆ‡æ¢æ¸å˜åŠ¨ç”»
2. å›¾æ ‡é¢œè‰²åŠ¨æ€å˜åŒ–
3. å›¾æ ‡ä¸åŒçŠ¶æ€çš„åŠ¨ç”»æ•ˆæœ

### P2 - å¯é€‰å®ç°

1. çª—å£å¼¹å…¥/å¼¹å‡ºåŠ¨ç”»
2. æ–‡æœ¬æ·¡å…¥æ·¡å‡ºæ•ˆæœ
3. é”™è¯¯æ—¶çš„æŠ–åŠ¨æ•ˆæœ

---

## åäºŒã€æ€»ç»“

æ ¸å¿ƒè®¾è®¡å†³ç­–ï¼š

| å†³ç­– | ç†ç”± |
|------|------|
| **å•çŠ¶æ€æ˜¾ç¤º** | æ‚¬æµ®çª—ç©ºé—´æœ‰é™ï¼Œåªå±•ç¤ºæœ€é‡è¦ä¿¡æ¯ |
| **é¢œè‰²åŒºåˆ†** | ç”¨æˆ·å¯ä¸€çœ¼è¯†åˆ«å½“å‰é˜¶æ®µï¼Œæ— éœ€é˜…è¯»æ–‡å­— |
| **ç®€åŒ–å¸ƒå±€** | å¤ç”¨ç°æœ‰å·¦å›¾æ ‡+å³æ–‡æœ¬å¸ƒå±€ï¼Œé™ä½å®ç°å¤æ‚åº¦ |
| **ä¼˜å…ˆçº§è§„åˆ™** | ç¡®ä¿é”™è¯¯å’Œç»“æœç­‰å…³é”®ä¿¡æ¯ä¸è¢«è¦†ç›– |
| **æµå¼æ›´æ–°** | æ€è€ƒå’Œè¯†åˆ«è¿‡ç¨‹å®æ—¶åé¦ˆï¼Œæå‡å“åº”æ„Ÿ |
